{
  "version": 3,
  "sources": ["../../monaco-editor/esm/vs/language/html/workerManager.js", "../../monaco-editor/esm/vs/language/html/htmlMode.js"],
  "sourcesContent": ["import { createWebWorker } from '../../common/workers.js';\r\n\r\nconst STOP_WHEN_IDLE_FOR = 2 * 60 * 1e3;\r\nclass WorkerManager {\r\n  constructor(defaults) {\r\n    this._defaults = defaults;\r\n    this._worker = null;\r\n    this._client = null;\r\n    this._idleCheckInterval = window.setInterval(() => this._checkIfIdle(), 30 * 1e3);\r\n    this._lastUsedTime = 0;\r\n    this._configChangeListener = this._defaults.onDidChange(() => this._stopWorker());\r\n  }\r\n  _stopWorker() {\r\n    if (this._worker) {\r\n      this._worker.dispose();\r\n      this._worker = null;\r\n    }\r\n    this._client = null;\r\n  }\r\n  dispose() {\r\n    clearInterval(this._idleCheckInterval);\r\n    this._configChangeListener.dispose();\r\n    this._stopWorker();\r\n  }\r\n  _checkIfIdle() {\r\n    if (!this._worker) {\r\n      return;\r\n    }\r\n    let timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\r\n    if (timePassedSinceLastUsed > STOP_WHEN_IDLE_FOR) {\r\n      this._stopWorker();\r\n    }\r\n  }\r\n  _getClient() {\r\n    this._lastUsedTime = Date.now();\r\n    if (!this._client) {\r\n      this._worker = createWebWorker({\r\n        // module that exports the create() method and returns a `HTMLWorker` instance\r\n        moduleId: \"vs/language/html/htmlWorker\",\r\n        createWorker: () => new Worker(new URL('html.worker.js', import.meta.url), { type: \"module\" }),\r\n        // passed in to the create() method\r\n        createData: {\r\n          languageSettings: this._defaults.options,\r\n          languageId: this._defaults.languageId\r\n        },\r\n        label: this._defaults.languageId\r\n      });\r\n      this._client = this._worker.getProxy();\r\n    }\r\n    return this._client;\r\n  }\r\n  getLanguageServiceWorker(...resources) {\r\n    let _client;\r\n    return this._getClient().then((client) => {\r\n      _client = client;\r\n    }).then((_) => {\r\n      if (this._worker) {\r\n        return this._worker.withSyncedResources(resources);\r\n      }\r\n    }).then((_) => _client);\r\n  }\r\n}\r\n\r\nexport { WorkerManager };\r\n", "import { WorkerManager } from './workerManager.js';\r\nimport { HoverAdapter, DocumentHighlightAdapter, DocumentLinkAdapter, FoldingRangeAdapter, DocumentSymbolAdapter, SelectionRangeAdapter, RenameAdapter, DocumentFormattingEditProvider, DocumentRangeFormattingEditProvider, CompletionAdapter } from '../common/lspLanguageFeatures.js';\r\nexport { DefinitionAdapter, DiagnosticsAdapter, DocumentColorAdapter, ReferenceAdapter, fromPosition, fromRange, toRange, toTextEdit } from '../common/lspLanguageFeatures.js';\r\nimport '../../editor/browser/coreCommands.js';\r\nimport '../../editor/browser/widget/codeEditor/codeEditorWidget.js';\r\nimport '../../editor/browser/widget/diffEditor/diffEditor.contribution.js';\r\nimport '../../editor/contrib/anchorSelect/browser/anchorSelect.js';\r\nimport '../../editor/contrib/bracketMatching/browser/bracketMatching.js';\r\nimport '../../editor/contrib/caretOperations/browser/caretOperations.js';\r\nimport '../../editor/contrib/caretOperations/browser/transpose.js';\r\nimport '../../editor/contrib/clipboard/browser/clipboard.js';\r\nimport '../../editor/contrib/codeAction/browser/codeActionContributions.js';\r\nimport '../../editor/contrib/codelens/browser/codelensController.js';\r\nimport '../../editor/contrib/colorPicker/browser/colorPickerContribution.js';\r\nimport '../../editor/contrib/comment/browser/comment.js';\r\nimport '../../editor/contrib/contextmenu/browser/contextmenu.js';\r\nimport '../../editor/contrib/cursorUndo/browser/cursorUndo.js';\r\nimport '../../editor/contrib/dnd/browser/dnd.js';\r\nimport '../../editor/contrib/dropOrPasteInto/browser/copyPasteContribution.js';\r\nimport '../../editor/contrib/dropOrPasteInto/browser/dropIntoEditorContribution.js';\r\nimport '../../editor/contrib/find/browser/findController.js';\r\nimport '../../editor/contrib/folding/browser/folding.js';\r\nimport '../../editor/contrib/fontZoom/browser/fontZoom.js';\r\nimport '../../editor/contrib/format/browser/formatActions.js';\r\nimport '../../editor/contrib/documentSymbols/browser/documentSymbols.js';\r\nimport '../../editor/contrib/inlineCompletions/browser/inlineCompletions.contribution.js';\r\nimport '../../editor/contrib/inlineProgress/browser/inlineProgress.js';\r\nimport '../../editor/contrib/gotoSymbol/browser/goToCommands.js';\r\nimport '../../editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js';\r\nimport '../../editor/contrib/gotoError/browser/gotoError.js';\r\nimport '../../editor/contrib/gpu/browser/gpuActions.js';\r\nimport '../../editor/contrib/hover/browser/hoverContribution.js';\r\nimport '../../editor/contrib/indentation/browser/indentation.js';\r\nimport '../../editor/contrib/inlayHints/browser/inlayHintsContribution.js';\r\nimport '../../editor/contrib/inPlaceReplace/browser/inPlaceReplace.js';\r\nimport '../../editor/contrib/insertFinalNewLine/browser/insertFinalNewLine.js';\r\nimport '../../editor/contrib/lineSelection/browser/lineSelection.js';\r\nimport '../../editor/contrib/linesOperations/browser/linesOperations.js';\r\nimport '../../editor/contrib/linkedEditing/browser/linkedEditing.js';\r\nimport '../../editor/contrib/links/browser/links.js';\r\nimport '../../editor/contrib/longLinesHelper/browser/longLinesHelper.js';\r\nimport '../../editor/contrib/middleScroll/browser/middleScroll.contribution.js';\r\nimport '../../editor/contrib/multicursor/browser/multicursor.js';\r\nimport '../../editor/contrib/parameterHints/browser/parameterHints.js';\r\nimport '../../editor/contrib/placeholderText/browser/placeholderText.contribution.js';\r\nimport '../../editor/contrib/rename/browser/rename.js';\r\nimport '../../editor/contrib/sectionHeaders/browser/sectionHeaders.js';\r\nimport '../../editor/contrib/semanticTokens/browser/documentSemanticTokens.js';\r\nimport '../../editor/contrib/semanticTokens/browser/viewportSemanticTokens.js';\r\nimport '../../editor/contrib/smartSelect/browser/smartSelect.js';\r\nimport '../../editor/contrib/snippet/browser/snippetController2.js';\r\nimport '../../editor/contrib/stickyScroll/browser/stickyScrollContribution.js';\r\nimport '../../editor/contrib/suggest/browser/suggestController.js';\r\nimport '../../editor/contrib/suggest/browser/suggestInlineCompletions.js';\r\nimport '../../editor/contrib/tokenization/browser/tokenization.js';\r\nimport '../../editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js';\r\nimport '../../editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js';\r\nimport '../../editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js';\r\nimport '../../editor/contrib/wordHighlighter/browser/wordHighlighter.js';\r\nimport '../../editor/contrib/wordOperations/browser/wordOperations.js';\r\nimport '../../editor/contrib/wordPartOperations/browser/wordPartOperations.js';\r\nimport '../../editor/contrib/readOnlyMessage/browser/contribution.js';\r\nimport '../../editor/contrib/diffEditorBreadcrumbs/browser/contribution.js';\r\nimport '../../editor/contrib/floatingMenu/browser/floatingMenu.contribution.js';\r\nimport '../../editor/common/standaloneStrings.js';\r\nimport '../../base/browser/ui/codicons/codicon/codicon.css';\r\nimport '../../base/browser/ui/codicons/codicon/codicon-modifiers.css';\r\nimport '../../editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js';\r\nimport '../../editor/standalone/browser/inspectTokens/inspectTokens.js';\r\nimport '../../editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js';\r\nimport '../../editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js';\r\nimport '../../editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js';\r\nimport '../../editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js';\r\nimport '../../editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js';\r\nimport '../../editor/standalone/browser/toggleHighContrast/toggleHighContrast.js';\r\nimport { languages } from '../../editor/editor.api2.js';\r\n\r\nclass HTMLCompletionAdapter extends CompletionAdapter {\r\n  constructor(worker) {\r\n    super(worker, [\".\", \":\", \"<\", '\"', \"=\", \"/\"]);\r\n  }\r\n}\r\nfunction setupMode1(defaults) {\r\n  const client = new WorkerManager(defaults);\r\n  const worker = (...uris) => {\r\n    return client.getLanguageServiceWorker(...uris);\r\n  };\r\n  let languageId = defaults.languageId;\r\n  languages.registerCompletionItemProvider(languageId, new HTMLCompletionAdapter(worker));\r\n  languages.registerHoverProvider(languageId, new HoverAdapter(worker));\r\n  languages.registerDocumentHighlightProvider(\r\n    languageId,\r\n    new DocumentHighlightAdapter(worker)\r\n  );\r\n  languages.registerLinkProvider(languageId, new DocumentLinkAdapter(worker));\r\n  languages.registerFoldingRangeProvider(\r\n    languageId,\r\n    new FoldingRangeAdapter(worker)\r\n  );\r\n  languages.registerDocumentSymbolProvider(\r\n    languageId,\r\n    new DocumentSymbolAdapter(worker)\r\n  );\r\n  languages.registerSelectionRangeProvider(\r\n    languageId,\r\n    new SelectionRangeAdapter(worker)\r\n  );\r\n  languages.registerRenameProvider(languageId, new RenameAdapter(worker));\r\n  if (languageId === \"html\") {\r\n    languages.registerDocumentFormattingEditProvider(\r\n      languageId,\r\n      new DocumentFormattingEditProvider(worker)\r\n    );\r\n    languages.registerDocumentRangeFormattingEditProvider(\r\n      languageId,\r\n      new DocumentRangeFormattingEditProvider(worker)\r\n    );\r\n  }\r\n}\r\nfunction setupMode(defaults) {\r\n  const disposables = [];\r\n  const providers = [];\r\n  const client = new WorkerManager(defaults);\r\n  disposables.push(client);\r\n  const worker = (...uris) => {\r\n    return client.getLanguageServiceWorker(...uris);\r\n  };\r\n  function registerProviders() {\r\n    const { languageId, modeConfiguration } = defaults;\r\n    disposeAll(providers);\r\n    if (modeConfiguration.completionItems) {\r\n      providers.push(\r\n        languages.registerCompletionItemProvider(languageId, new HTMLCompletionAdapter(worker))\r\n      );\r\n    }\r\n    if (modeConfiguration.hovers) {\r\n      providers.push(\r\n        languages.registerHoverProvider(languageId, new HoverAdapter(worker))\r\n      );\r\n    }\r\n    if (modeConfiguration.documentHighlights) {\r\n      providers.push(\r\n        languages.registerDocumentHighlightProvider(\r\n          languageId,\r\n          new DocumentHighlightAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.links) {\r\n      providers.push(\r\n        languages.registerLinkProvider(languageId, new DocumentLinkAdapter(worker))\r\n      );\r\n    }\r\n    if (modeConfiguration.documentSymbols) {\r\n      providers.push(\r\n        languages.registerDocumentSymbolProvider(\r\n          languageId,\r\n          new DocumentSymbolAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.rename) {\r\n      providers.push(\r\n        languages.registerRenameProvider(languageId, new RenameAdapter(worker))\r\n      );\r\n    }\r\n    if (modeConfiguration.foldingRanges) {\r\n      providers.push(\r\n        languages.registerFoldingRangeProvider(\r\n          languageId,\r\n          new FoldingRangeAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.selectionRanges) {\r\n      providers.push(\r\n        languages.registerSelectionRangeProvider(\r\n          languageId,\r\n          new SelectionRangeAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.documentFormattingEdits) {\r\n      providers.push(\r\n        languages.registerDocumentFormattingEditProvider(\r\n          languageId,\r\n          new DocumentFormattingEditProvider(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.documentRangeFormattingEdits) {\r\n      providers.push(\r\n        languages.registerDocumentRangeFormattingEditProvider(\r\n          languageId,\r\n          new DocumentRangeFormattingEditProvider(worker)\r\n        )\r\n      );\r\n    }\r\n  }\r\n  registerProviders();\r\n  disposables.push(asDisposable(providers));\r\n  return asDisposable(disposables);\r\n}\r\nfunction asDisposable(disposables) {\r\n  return { dispose: () => disposeAll(disposables) };\r\n}\r\nfunction disposeAll(disposables) {\r\n  while (disposables.length) {\r\n    disposables.pop().dispose();\r\n  }\r\n}\r\n\r\nexport { CompletionAdapter, DocumentFormattingEditProvider, DocumentHighlightAdapter, DocumentLinkAdapter, DocumentRangeFormattingEditProvider, DocumentSymbolAdapter, FoldingRangeAdapter, HoverAdapter, RenameAdapter, SelectionRangeAdapter, WorkerManager, setupMode, setupMode1 };\r\n"],
  "mappings": "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",
  "names": []
}
